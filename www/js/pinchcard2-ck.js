// This version will work on a single touch element, not a list spanning multipal items.
(function(){if(typeof this.$=="undefined")throw new Error("zepto.js required");$.fn.forEach||($.fn.forEach=$.fn.each);PinchCard2=function(e){var t={},n=null;this.list=[];this.fireAction=null;var r=this;$(e).bind("touchstart",function(r){if(r.touches.length===2&&$(r.touches[1].target).closest(e)[0]===$(r.touches[0].target).closest(e)[0]){r.preventDefault();n=$(r.touches[1].target).closest(e)[0];t.x1=r.touches[0].pageX;t.y1=r.touches[0].pageY;t.x2=r.touches[1].pageX;t.y2=r.touches[1].pageY}}).bind("touchmove",function(i){var s=15;if(i.touches.length===2&&$(i.touches[1].target).closest(e)[0]===$(i.touches[0].target).closest(e)[0]){i.preventDefault();t.dx1=i.touches[0].pageX-t.x1;t.dy1=i.touches[0].pageY-t.y1;t.dx2=i.touches[1].pageX-t.x2;t.dy2=i.touches[1].pageY-t.y2;var o=(t.dy1+t.dy2)/6;r.list.push(o);if(r.list.length>=5){var u=_.reduce(r.list,function(e,t){return e+t},0);if(r.fireAction===null){u<-s?$(n).trigger("openPanel"):u>s&&$(n).trigger("closePanel");Math.abs(u)>=s&&(r.fireAction=!0)}}}}).bind("touchend touchcancel",function(){r.fireAction=null;r.list=[]})}}).call(this);