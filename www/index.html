<!doctype html>
<html class="no-js">
    <head>
      <title>Ebook</title>
      <meta charset="utf-8"/>
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>

      <meta name="apple-mobile-web-app-capable" content="yes" />
      <meta name="apple-mobile-web-app-status-bar-style" content="black" />
      <meta content='width=device-width, initial-scale=1.0 maximum-scale=1.0 user-scalable=0' name='viewport' />

      <link rel="stylesheet" type="text/css" href="css/application.css"></link>

      <!-- // <script src="http://192.168.0.199:8080/target/target-script-min.js#anonymous"></script> -->

      <script src="bookdata.json" ></script>
      <script src="decadedata.json" ></script>
      <script src="js/modernizr.custom.71147.js"></script>
      <script src="js/zepto-1.0.rc.js" ></script>
      <script src="js/zepto-onpress.js" ></script>
      <script src="js/underscore-1.3.3-min.js" ></script>

      <script src="js/backbone-0.9.2-min.js" ></script>
      <script src="js/backbone-localStorage-min.js" ></script>
      <script src="js/new_application.js" ></script>
      <script src="cordova-2.1.0.js" ></script>
      <script src="js/pinchcard2.js"></script>
      <script type="text/javascript">
          var onDeviceReady = function(e) {}

          $(document).ready(function(e){
            document.addEventListener("deviceready", onDeviceReady, false);
            // new PinchCard2('.target');
            // All of this to be moved into application.js, cover not in backbone yet

            // if (window.App.optionPinch) {
            //   $('.target').on('openPanel', function(event){
            //     $(this).find('.dive').first().addClass('dive__open');
            //   }).on('clsePanel', function(event){
            //     $(this).find('.dive').first().removeClass('dive__open');
            //   });
            // }

            // if (window.App.optionTap) {
            //   $('.target__cover').onpress(function(event){
            //     event.stopPropagation();
            //     event.preventDefault();
            //     $(this).find('.dive').first().toggleClass('dive__open');
            //   });
            // }
            // window.App.bookopen = false;
            // 
            // if (window.App.optionClickDev) {
            //   $('.target__cover').click(function(event){
            //     if (window.App.bookopen == false) {
            //       event.stopPropagation();
            //       event.preventDefault();
            //       window.App.bookopen = true;
            //       $(this).find('.dive').first().toggleClass('dive__open');
            //     }
            //   });
            // }
            // 
            // $(".decade").click(function(e){
            //   console.log("FIRE");
            // })
            
            
            
          });

          // Stop bounce - This will need to be changed to support scrolling down...
          // function stopScrolling(touchEvent) { touchEvent.preventDefault(); }
          // document.addEventListener('touchstart', stopScrolling, false );
          // document.addEventListener('touchmove', stopScrolling, false );

      </script>
    </head>
    <body lang="en">
      <!-- <div id="decadeIntro"></div> -->
      <!-- <div id="decades"></div> -->
      <div class="main_wrapper_outer">
        <div id="main" class="main_wrapper">
          <div id="cover" class="cover">
            <header class="cover_header">
              <h1><strong>50 Years</strong> <span class="lowercase">of</span> Life Online</h1>
            </header>
            <div class="target target__cover">
              <div class="cover_outer dive">
                <i class="dive_icon"></i>
                <div id="decades" class="cover_wrapper dive_wrapper dive__open"></div>
              </div>
            </div>
          </div>
          <span class="no-overflowscrolling-fix">(temp overflow scrolling fix, placeholder for real cover content)</span><!-- temp, but some content is necessary here to stop webview area bounce on scroll -->
          <div id="spine">
            <div id="key"></div>
          </div>
        </div>
      </div>

      <script type="text/template" id="template-section">

        <header class="toc_item_head ">
          <hgroup>
            <h4 class="toc_item_head_year"></h4>
            <h3 class="toc_item_head_title"><%= title %></h3>
          </hgroup>
          <section class="toc_item_intro">
            <%= content %>
          </section>
        </header>
        
        <div class="target target__decade_toc ">
          <div class="decade_toc dive"><!-- acts like .com -->
            <i class="dive_icon"></i>
            <div class="decade_toc_wrapper dive_wrapper">
              <!-- yearTOC should render here -->
            </div>
          </div>
        </div>
      </script>

      <script type="text/template" id="template-chapter">
        <section class="chap_sec">
          <h4><%= title %> <%= slug %></h4>
          <div class="paragraphs paragraphs_toc_wrapper"></div>
        </section>
      </script>

      <script type="text/template" id="template-comments">
          <aside class="com dive">
            <span class="ui dive_count"><%= comment_count %></span>
            <i class="dive_icon"></i>
            <section class="com_wrapper dive_wrapper">
              <ul class="com_comments">

              <!-- Comments (com_comments_comment) should load here -->

              <li class="com_comments_actions">
                  <ul class="com_comments_actions_items">
                    <li class="com_comments_actions_item">
                      <a href="#comments" class="view_all" title="View all the comments in this discussion">View all comments&hellip;</a>
                    </li>
                    <li class="com_comments_actions_item">
                      <a href="#" title="" class="button com_comments_meta_add">Add Comment</a>
                    </li>
                  </ul>
                </li>
              </ul>
            </section>
          </aside>
      </script>

      <script type="text/template" id="template-comment">
        <section class="com_comments_comment_wrap">
          <%= content %>
          <span class="com_comments_comment_cite">&mdash;<%= name %></span>
        </section>
        <a href="#reply" title="Reply to <%= name %>'s comment" class="ui com_comments_comment_reply">
          <i class="ui com_comments_comment_reply_icon">+</i>Reply
        </a>
      </script>

      <script type="text/template" id="template-comment-form">
        <div class="com_add_sec modal modal__open">
          <form class="com_add_form" method="post" action="#">
            <fieldset>
              <label for="commentName">Name</label>
              <input type="text" name="commentName" id="commentName" placeholder="Your name" />
              <label for="commentEmail">Email</label>
              <input type="text" name="commentEmail" id="commentEmail" placeholder="Your email" />
              <label for="commentText">Comment</label>
              <textarea name="commentText" id="commentText"></textarea>
            </fieldset>
            <fieldset class="form_action_items">
              <button class="submit button">Add Comment</button>
              <button class="cancel">Cancel</button>
            </fieldset>
          </form>
        </div>
      </script>

      <script type="text/template" id="template-chapters-header">
        <!-- The header for the chapter would go here, before the list of sections -->
        <header class="chap_head">
          <hgroup class="chap_head_group">
            <h2 class="h_subtitle">The Internet in <%= decade %></h2>
            <h1 class="h_title"><%= title %></h1>
          </hgroup>
          <figure class="chap_head_fig">
            <img src="images/headers/temp_chapter_<%= decade %>.png" alt="" />
          </figure>
      </header>
      </script>
      
      <script type="text/template" id="template-chapter">
        <h1>Chapter <%= title %></h1>
        <div class="chapter_toc_wrapper dive_wrapper">
          <!-- paragraphs should render here -->
        </div>
      </script>
      
      <script type="text/template" id="template-paragraph">
        <h1><%= title %></h1>
        <%= content %>
      </script>
      
    </body>
    <script src="js/prefixfree.js"></script>
</html>
